<div class="maintoday">
    <div class="mainImgBanner">
        <span class="doubleStroke">
            이곳은 학생들을 위한 <br class="mobileline"> 소통의 장,<br>
            양지 네트워크입니다!
        </span>
    </div>
</div>

<div class="rowdiv">
    <div class="contentDiv today">
        <div class="titleText patternAccent">오늘의 정보</div>

        <div class="contentDiv one_line_announce" id="announce_div">
            <div id="announce_content"><span class="announceTag">공지</span> 5월 버스킹 취소</div>
            <script>
                const contentList = [
                    '<span class="announceTag">공지</span> 5월 버스킹 취소',
                    '<span class="announceTag">공지</span> 5월 등교 노래 신청',
                    '<span class="announceTag">공지</span> 체육대회(05.19) 관련 공지',
                    '<span class="updateTag">업데이트</span> 공지 부분 디테일 대폭 증가'
                ]

                function delay(ms = 1000) {
                    return new Promise((resolve) => setTimeout(resolve, ms));
                }

                let contentIndex = 0

                function moveByUser(delta, stopTimer) {
                    const contentEl = document.getElementById('announce_content')
                    contentIndex += Number(delta)
                    if (contentIndex >= contentList.length) {
                        contentIndex = 0
                    } else if (contentIndex < 0) {
                        contentIndex = contentList.length - 1
                    }

                    contentEl.style.opacity = 0
                    delay(500).then(() => {
                        contentEl.style.opacity = 1
                        contentEl.innerHTML = contentList[contentIndex]
                    })

                    if(stopTimer) {
                        endTimer()
                    }
                }

                function startTimer() {
                    if(mainTimerId != null) {return}
                    mainTimerId = setInterval(moveByUser, 5*1000, 1, false)
                }

                function endTimer() {
                    if(mainTimerId != null) {
                        clearInterval(mainTimerId)
                        mainTimerId = null
                    }
                    let restartTimerStartTime = new Date()
                    delay(10*1000).then(() => {
                        nowTime = new Date()
                        if(nowTime.getTime() - restartTimerStartTime.getTime() >= 9*1000) {
                            startTimer()
                            restartTimerStartTime = null
                        }
                    })
                }

                let mainTimerId = setInterval(moveByUser, 5*1000, 1, false)
                let restartTimerStartTime = null
            </script>
            <div class="controlButtonDiv">
                <i class="fa-solid fa-angle-left" onclick="moveByUser(-1, true);"></i>
                <i class="fa-solid fa-angle-right" onclick="moveByUser(1, true);"></i>
            </div>
        </div>

        <ul class="todayList">
            <li><a href="/living/meal">급식</a></li>
            <li><a href="/living/timetable">시간표</a></li>
            <li><a href="/living/schedule?mode=1">학사일정</a></li>
            <li><a href="/community/board?page=1&boardName=announce">기타안내</a></li>
        </ul>
        <script>
            function todayResize() {
                const todayEl = document.getElementsByClassName('todayList')
                if(todayEl[0].clientWidth <= 200) {todayEl[0].style.cssText = 'grid-template-columns: auto;'}
                else if(todayEl[0].clientWidth <= 500) {todayEl[0].style.cssText = 'grid-template-columns: repeat(2, auto);'}
                else {todayEl[0].style.cssText = 'grid-template-columns: repeat(4, auto);'}
            }
            window.addEventListener('resize', todayResize)
            todayResize()
        </script>
    </div>
    <script>
        function announceResize() {
            if (BodyEl.clientWidth >= 601) {
                const annDivEl = document.getElementById('announce_div')
                annDivBorderRadius = annDivEl.clientHeight
                annDivBorderRadius = annDivBorderRadius / 2
                annDivEl.style.paddingLeft = `${annDivBorderRadius}px`
                annDivEl.style.paddingRight = `${annDivBorderRadius}px`
                console.log(annDivEl, annDivEl.style, annDivBorderRadius)
            } else {
                annDivEl.style.paddingLeft = ``
                annDivEl.style.paddingRight = ``
            }
        }
        window.addEventListener('resize', announceResize)
        announceResize()
    </script>


    <div class="contentDiv information">
        <div class="titleTextWrap">
            <div class="titleText patternAccent">학생회와의</div>
            <div class="nbspText">&nbsp;</div>
            <div class="titleText patternAccent">소통창구!</div>
        </div>
        <ul>
            <li><a href="https://www.youtube.com/@yjms_23/featured"><img src="/src/homeIcons/yt.png"></a></li>
            <li><a href="https://instagram.com/yjms_23?igshid=YmMyMTA2M2Y="><img src="/src/homeIcons/ist.png"></a></li>
            <li><a href="http://pf.kakao.com/_KxfgLxj"><img src="/src/homeIcons/kkot.png"></a></li>
        </ul>
    </div>
</div>
